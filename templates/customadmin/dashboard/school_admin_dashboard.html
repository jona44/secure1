{% extends "partials/base.html" %}
{% load static %}

{% block content %}
<div class="section w-75 offset-md mt-5">
    <h1 class="text-warning">School Admin</h1>
    <div class="row mb-3  gap-2">
      <div class="col-md rounded border  p-3">
        <h3 class="text-info">Students <span class="badge rounded-pill text-bg-info">{{students_count}}</span> </h3>
        <div class="body d-flex">
          <img src="{% static 'images\boy & girl.png '%}" width="100" alt="">
          <div class="p-2">
            <h4 > Boys <span class="badge rounded-pill bgboys">{{male_count}}</span> </h4>
            <h4> Girls <span class="badge rounded-pill bggirls">{{female_count}}</span> </p></h4>
          </div>
        </div><hr>
        <a href="{% url 'students_list'%}" class="btn btn-secondary btn-sm">view all..</a>
      </div>
      <div class="col-md  rounded border p-3">
        <h3 class="text-warning">Teachers <span class="badge rounded-pill text-bg-info"> {{all_teachers}}</span></h3>
        <div class=" body d-flex">
          
          <div class="p-2 ">
           
            <li>On sick leave</li>
            <li>On leave</li>
            <li>Permanent Staff</li>
            <li>Substitute Staff</li>
            
          </div>
        </div><hr>
        <a href="{% url 'teacher_list'%}" class="btn btn-secondary btn-sm">view all..</a>
      </div>
      <div class="col-md  rounded border p-3">
        <h3 class="text-success">Classes <span class="badge rounded-pill text-bg-info"> {{classes}}</h3>
        <div class="body d-flex">
          <img src="{% static 'images\classes.png '%}" width="100" alt="">
          <div class="p-2">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ratione  omnis 
          </div>
        </div><hr>
        <a href="{% url 'all_classes' %}" class="btn btn-secondary btn-sm">view all..</a>
      </div>
      <div class="col-md rounded border p-3">
        <h3 class="text-primary">Subjects <span class="badge rounded-pill text-bg-info"> {{subject_count}}</h3>
        <div class="body d-flex">
         
          <div class="p-2 scroll-container"style="height: 110px;">
            {% for subject in allsubjects%}
                <li>{{subject}}</li>
            {% endfor %}
            
          </div>
        </div><hr>
        <a href="{% url 'subject_list'%}" class="btn btn-secondary btn-sm">view all..</a>
      </div>
    </div>
    <div class="row mt-3 p-3  gap-3" style="height: 250px;">
      <div class="col-md bg1 rounded">
       <canvas id="enrolmentChart"></canvas>
      </div>
      <div class="col-md bg1 rounded">
       <canvas id="attendanceChart"></canvas>
      </div>
      <div class="col-md bg1 rounded">
       <canvas id="passRateChart"></canvas>
      </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  var years = ['2020', '2021', '2022', '2023', '2024'];
  
  // Graph 1: Boys and Girls enrolment over the last 5 years
  var boysEnrolment = [450, 460, 470, 480, 490];
  var girlsEnrolment = [450, 440, 430, 420, 410];
  var ctx = document.getElementById('enrolmentChart').getContext('2d');
  new Chart(ctx, {
      type: 'bar',
      data: {
          labels: years,
          datasets: [{
              label: 'Boys',
              data: boysEnrolment,
              backgroundColor: 'rgba(0,150,136,1)',
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 1
          }, {
              label: 'Girls',
              data: girlsEnrolment,
              backgroundColor: 'rgba(171,76,181,1)',
              borderColor: 'rgba(255, 99, 132, 1)',
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true
              }
          }
      }
  });

  // Graph 2: School attendance for Boys and Girls over the last 5 years
  var boysAttendance = [400, 410, 420, 430, 440];
  var girlsAttendance = [400, 390, 380, 370, 360];
  var ctx = document.getElementById('attendanceChart').getContext('2d');
  new Chart(ctx, {
      type: 'bar',
      data: {
          labels: years,
          datasets: [{
              label: 'Boys',
              data: boysAttendance,
              backgroundColor: 'rgba(75, 192, 192, 0.2)',
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 1
          }, {
              label: 'Girls',
              data: girlsAttendance,
              backgroundColor: 'rgba(255, 99, 132, 0.2)',
              borderColor: 'rgba(255, 99, 132, 1)',
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true
              }
          }
      }
  });

  // Graph 3: Final high school exam pass rate for Boys and Girls over the last 5 years
  var boysPassRate = [80, 85, 90, 95, 100];
  var girlsPassRate = [80, 75, 70, 65, 60];
  var ctx = document.getElementById('passRateChart').getContext('2d');
  new Chart(ctx, {
      type: 'bar',
      data: {
          labels: years,
          datasets: [{
              label: 'Boys',
              data: boysPassRate,
              backgroundColor: 'rgba(75, 192, 192, 0.2)',
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 1
          }, {
              label: 'Girls',
              data: girlsPassRate,
              backgroundColor: 'rgba(255, 99, 132, 0.2)',
              borderColor: 'rgba(255, 99, 132, 1)',
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true
              }
          }
      }
  });
</script>
 
{%endblock%}